# Phase 2 Testing Checklist: Order Management

**Tester:** _________________________
**Date:** _________________________
**Environment:** _________________________ (e.g., Local Dev, Staging)

---

## 1. Order REST API Endpoints

**Note:** These tests are best performed using a REST API client (e.g., Postman, Insomnia). Authentication (cookie or nonce) as `store_manager_frontend` or Admin is required. Assume some orders exist with various statuses, products, and notes for comprehensive testing.

| Test Case ID | Action                                                                                                                                                                                             | Expected Result                                                                                                                                                                                                                                                           | Actual Result | Status (Pass/Fail) |
|--------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|--------------------|
| **OAPI-01**  | **List Orders (GET `/orders`)** <br> 1. Send GET request to `/esm/v1/orders`.                                                                                                                       | Returns a JSON array of orders (can be empty if no orders). Status 200. Pagination headers (`X-WP-Total`, `X-WP-TotalPages`) are present. Each order object contains fields defined in `esm_format_order_data_for_list`.                                                       |               |                    |
| **OAPI-02**  | **List Orders - Pagination** <br> 1. Send GET to `/esm/v1/orders?page=2&per_page=5`.                                                                                                                | Returns page 2 of orders, with max 5 orders. Status 200.                                                                                                                                                                                                                    |               |                    |
| **OAPI-03**  | **List Orders - Search by Order ID** <br> 1. Assuming order with ID `123` exists. <br> 2. Send GET to `/esm/v1/orders?search=123`.                                                                  | Returns an array containing order `123`. Status 200.                                                                                                                                                                                                                      |               |                    |
| **OAPI-04**  | **List Orders - Search by Customer Email** <br> 1. Assuming an order exists for `customer@example.com`. <br> 2. Send GET to `/esm/v1/orders?search=customer@example.com`.                         | Returns orders associated with that customer email. Status 200.                                                                                                                                                                                                           |               |                    |
| **OAPI-05**  | **List Orders - Filter by Status** <br> 1. Send GET to `/esm/v1/orders?status[]=processing`. <br> 2. Send GET to `/esm/v1/orders?status[]=processing&status[]=on-hold`.                              | Returns only orders with "processing" status. Then, returns orders with "processing" OR "on-hold" status. Status 200.                                                                                                                                                |               |                    |
| **OAPI-06**  | **List Orders - Filter by Date** <br> 1. Assuming orders exist before `2023-01-01`. <br> 2. Send GET to `/esm/v1/orders?date_before=2023-01-01`.                                                    | Returns orders created before Jan 1, 2023. Status 200.                                                                                                                                                                                                                    |               |                    |
| **OAPI-07**  | **List Orders - Sorting** <br> 1. Send GET to `/esm/v1/orders?orderby=total&order=asc`.                                                                                                             | Returns orders sorted by total amount in ascending order. Status 200.                                                                                                                                                                                                     |               |                    |
| **OAPI-08**  | **Get Single Order (GET `/orders/{id}`)** <br> 1. Send GET to `/esm/v1/orders/{valid_order_id}`.                                                                                                    | Returns JSON data for the specified order, including line items, addresses, and notes, as formatted by `esm_format_single_order_data`. Status 200.                                                                                                              |               |                    |
| **OAPI-09**  | **Get Single Order - Invalid ID** <br> 1. Send GET to `/esm/v1/orders/{invalid_order_id}`.                                                                                                         | Returns a JSON error object (e.g., "Order not found."). Status 404.                                                                                                                                                                                                       |               |                    |
| **OAPI-10**  | **Update Order Status (PUT `/orders/{id}/status`)** <br> 1. Send PUT to `/esm/v1/orders/{valid_order_id}/status` with JSON body `{"status": "completed"}`.                                         | Order status is updated to "completed". Returns updated order data. Status 200. An order note should be added indicating the status change.                                                                                                                            |               |                    |
| **OAPI-11**  | **Update Order Status - Invalid Status** <br> 1. Send PUT to `/esm/v1/orders/{valid_order_id}/status` with `{"status": "invalid_status_slug"}`.                                                   | Returns a JSON error (e.g., "Invalid order status provided."). Status 400. Order status remains unchanged.                                                                                                                                                             |               |                    |
| **OAPI-12**  | **Update Order Status - Invalid Order ID** <br> 1. Send PUT to `/esm/v1/orders/{invalid_order_id}/status` with `{"status": "processing"}`.                                                         | Returns a JSON error. Status 404.                                                                                                                                                                                                                                           |               |                    |
| **OAPI-13**  | **Add Order Note (POST `/orders/{id}/notes`)** <br> 1. Send POST to `/esm/v1/orders/{valid_order_id}/notes` with JSON `{"note": "This is a test private note.", "is_customer_note": false}`.         | Adds a private note to the order. Returns JSON of the created note. Status 201.                                                                                                                                                                                           |               |                    |
| **OAPI-14**  | **Add Customer Order Note** <br> 1. Send POST to `/esm/v1/orders/{valid_order_id}/notes` with JSON `{"note": "Your order has shipped.", "is_customer_note": true}`.                                | Adds a customer-visible note to the order. Returns JSON of the created note. Status 201. Relevant customer email may be triggered by WooCommerce.                                                                                                                      |               |                    |
| **OAPI-15**  | **Add Order Note - Empty Note** <br> 1. Send POST to `/esm/v1/orders/{valid_order_id}/notes` with `{"note": ""}`.                                                                                   | Returns a JSON error (e.g., "Order note cannot be empty."). Status 400.                                                                                                                                                                                                    |               |                    |
| **OAPI-16**  | **Add Order Note - Invalid Order ID** <br> 1. Send POST to `/esm/v1/orders/{invalid_order_id}/notes` with `{"note": "Test"}`.                                                                      | Returns a JSON error. Status 404.                                                                                                                                                                                                                                           |               |                    |
| **OAPI-17**  | **Permission Check - No Auth** <br> 1. Attempt any of the above order API calls without authentication.                                                                                              | Request is denied. Status 401 (or as per WP REST API config for unauthenticated users).                                                                                                                                                                                    |               |                    |
| **OAPI-18**  | **Permission Check - Insufficient Role** <br> 1. Authenticate as a user with a role other than `store_manager_frontend` or Admin (e.g., Subscriber). <br> 2. Attempt any order API call.         | Request is denied with an error message like "You do not have permission to manage orders." Status 403.                                                                                                                                                                 |               |                    |

---

## 2. Frontend Order Management UI (Vue.js app)

### 2.1 `AppComponent` Integration

| Test Case ID | Action                                                                                                   | Expected Result                                                                                                                     | Actual Result | Status (Pass/Fail) |
|--------------|----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------|---------------|--------------------|
| **OFUI-AC-01** | 1. Log in as `store_manager_frontend`. <br> 2. Navigate to `/storemanagement/`. <br> 3. Click "Orders" in the sidebar. | Main content area updates to show the Order List view (`OrderListComponent`). "Orders" link in sidebar is active. Sidebar is sticky. |               |                    |

### 2.2 `OrderListComponent`

| Test Case ID | Action                                                                                                                                                                 | Expected Result                                                                                                                                                                                                                                                          | Actual Result | Status (Pass/Fail) |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|--------------------|
| **OFUI-OL-01** | **Display Orders** <br> 1. Ensure some orders exist. <br> 2. Navigate to the Orders view.                                                                                 | Orders are displayed in a table. Columns: Order #, Date, Status, Customer, Total, Actions. Data is accurate. Loading indicator shows initially. Status has appropriate color coding. Order # is a link.                                                                 |               |                    |
| **OFUI-OL-02** | **No Orders Display** <br> 1. Ensure no orders exist (or filters result in no orders). <br> 2. Navigate/filter to this state.                                             | "No orders found" message is displayed.                                                                                                                                                                                                                                  |               |                    |
| **OFUI-OL-03** | **Search by Order ID** <br> 1. Type a known Order ID (e.g., "123") in the search bar. <br> 2. Click "Filter" or wait for debounce.                                         | Table updates to show only order #123 (if it exists).                                                                                                                                                                                                                    |               |                    |
| **OFUI-OL-04** | **Search by Customer Name/Email** <br> 1. Type a known customer name or email in search. <br> 2. Click "Filter".                                                         | Table updates to show orders matching the customer.                                                                                                                                                                                                                      |               |                    |
| **OFUI-OL-05** | **Filter by Status** <br> 1. Select a status (e.g., "Processing") from the status dropdown. <br> 2. Click "Filter".                                                      | Table updates to show only orders with "Processing" status.                                                                                                                                                                                                              |               |                    |
| **OFUI-OL-06** | **Filter by Date Range** (If UI for date pickers was implemented) <br> 1. Select a "Date After" and/or "Date Before". <br> 2. Click "Filter".                             | Table updates to show orders within the specified date range. (Note: Date pickers were not explicitly in the component description, so this is conditional on implementation). If not implemented, mark N/A.                                                     |               |                    |
| **OFUI-OL-07** | **Pagination** <br> 1. Ensure more orders exist than `itemsPerPage`. <br> 2. Use pagination controls (Next, Previous, Page Numbers).                                     | Order list updates correctly for each page. Controls enable/disable correctly.                                                                                                                                                                                           |               |                    |
| **OFUI-OL-08** | **View Order Details** <br> 1. Click the "View" button or Order # link for an order.                                                                                      | Order Detail modal opens, displaying details for the selected order. `selectedOrderId` in `OrderListComponent` is set.                                                                                                                                               |               |                    |
| **OFUI-OL-09** | **Error Handling** <br> 1. Simulate API error when fetching orders (e.g., network error, 500 server error).                                                               | An appropriate error message is displayed to the user within the `OrderListComponent`. Table might show "Failed to fetch orders." or similar.                                                                                                                       |               |                    |

### 2.3 `OrderDetailComponent` (Modal)

| Test Case ID | Action                                                                                                                                                                | Expected Result                                                                                                                                                                                                                                                           | Actual Result | Status (Pass/Fail) |
|--------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|--------------------|
| **OFUI-OD-01** | **Display Order Details** <br> 1. Open the detail view for an order.                                                                                                    | Modal displays: Order #, Date, Status (in dropdown), Total, Payment Method. Customer Name, Email. Billing & Shipping Addresses. Line Items (Product, SKU, Qty, Unit Price, Total). Order Notes. Customer Note (if any). Form to add new note. All data is accurate.        |               |                    |
| **OFUI-OD-02** | **Update Status - Valid** <br> 1. Select a new valid status from the dropdown (e.g., "Completed"). <br> 2. Click "Update". Confirm prompt.                               | API call to update status is made. Order status updates in the modal (reflecting new data from API). An "Order status updated" success message (alert/toast). New order note about status change appears.                                                               |               |                    |
| **OFUI-OD-03** | **Update Status - No Change** <br> 1. Ensure dropdown shows current status. <br> 2. Click "Update".                                                                    | "Update" button should be disabled or no action taken if status hasn't changed.                                                                                                                                                                                           |               |                    |
| **OFUI-OD-04** | **Update Status - Invalid (Simulate API error)** <br> 1. Modify API to temporarily reject status updates. <br> 2. Try to update status.                                  | Error message is displayed in the modal. Status dropdown reverts to original status.                                                                                                                                                                                        |               |                    |
| **OFUI-OD-05** | **Add Private Note** <br> 1. Type a note in "Add New Note" textarea. <br> 2. Ensure "Visible to customer?" is UNCHECKED. <br> 3. Click "Add Note".                       | API call to add note is made. Note appears in the Order Notes list, marked as private (e.g., different background, no "Note to customer" text). Textarea clears. Success message.                                                                                    |               |                    |
| **OFUI-OD-06** | **Add Customer Note** <br> 1. Type a note. <br> 2. CHECK "Visible to customer?". <br> 3. Click "Add Note".                                                              | API call made. Note appears in list, marked for customer (e.g., different background/text). Textarea clears. Success message.                                                                                                                                             |               |                    |
| **OFUI-OD-07** | **Add Empty Note** <br> 1. Click "Add Note" with empty textarea.                                                                                                        | Alert/message "Note content cannot be empty." No API call.                                                                                                                                                                                                                  |               |                    |
| **OFUI-OD-08** | **Modal Closure** <br> 1. Click "X" button in modal header or "Back to Orders" (if present). <br> 2. After an action like status update, if modal auto-closes.          | Modal closes. `OrderListComponent` is visible. If changes were made, `OrderListComponent` should refresh to reflect them (e.g., updated status in list).                                                                                                                  |               |                    |
| **OFUI-OD-09** | **Line Item Display** <br> 1. View an order with multiple line items, including variations.                                                                             | All line items are listed correctly with product name, SKU, quantity, unit price (subtotal/qty), and total. Variation info shown if applicable.                                                                                                                           |               |                    |
| **OFUI-OD-10** | **Order Notes Display** <br> 1. View an order with various notes (system, private, customer).                                                                          | Notes are displayed chronologically (newest first). Customer notes are visually distinct from private/system notes. Date and author (if not system) are shown.                                                                                                                |               |                    |

### 2.4 UI Responsiveness (Orders Section)

| Test Case ID | Action                                                                                                                               | Expected Result                                                                                                                                                                                                                                                           | Actual Result | Status (Pass/Fail) |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|--------------------|
| **OFUI-R-01**  | **Order List - Small Screen** <br> 1. View Order List on a mobile-sized screen.                                                          | Table columns may stack or scroll horizontally. Search/filter controls are usable and adapt to screen width. Pagination is accessible.                                                                                                                                        |               |                    |
| **OFUI-R-02**  | **Order Detail Modal - Small Screen** <br> 1. Open Order Detail modal on a mobile-sized screen.                                          | Modal content is scrollable if it exceeds screen height. All sections (overview, customer, items, notes, add note form) are readable and usable. Buttons are accessible. Modal itself is responsive.                                                                        |               |                    |

### 2.5 General Error Handling (Frontend)

| Test Case ID | Action                                                                                                                              | Expected Result                                                                                                                                                                                                                                                           | Actual Result | Status (Pass/Fail) |
|--------------|-------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|--------------------|
| **OFUI-EH-01** | **API Down** <br> 1. Simulate server being unavailable. <br> 2. Try to load Orders list or Order Details.                               | A user-friendly error message is shown (e.g., "Failed to connect to server." or "Could not load orders."). App does not crash.                                                                                                                                               |               |                    |
| **OFUI-EH-02** | **Permission Denied (e.g., token expired)** <br> 1. Simulate a 403 Forbidden error from API for an action.                           | A user-friendly message like "You do not have permission to perform this action." is shown. For a list, it might say "Could not load orders."                                                                                                                                |               |                    |

---
**Overall Test Summary (Phase 2 - Orders):**

*   **Passed:** _____
*   **Failed:** _____
*   **Blocked:** _____

**General Notes/Bugs Found (Phase 2):**
(Space for any general observations or bugs that don't fit a specific test case)

---
